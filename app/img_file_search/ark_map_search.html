<div class="panel">
    <div class="panel-body">
        <div ng-include="'pages/tabs.html'"></div>
        <div ng-include="'pages/subtabs.html'"></div>
        <div class="row">
            <div class="col-md-12">
                <div class="panel panel-default panel-collapsible table-responsive">
                    <div class="panel-heading" role="tab" data-toggle="collapse"
                        data-target="#tiedotPanel">
                        <h4 class="panel-title">
                            <span i18n="common.Results"></span> : {{vm.kartatTable.total()}} <span
                                i18n="common.Shown"></span> : {{vm.searchResults}} <span
                                class="pull-right glyphicon clickable_space collapsed-indicator"></span>
                        </h4>
                    </div>
                    <div class="panel-body panel-collapse form-horizontal collapse in"
                        id="tiedotPanel">                        
                        <div class="row">
                            <div class="col-md-2 col-sm-2 col-xs-2">                                
                                <button type="button"
                                    class="btn btn-default"
                                    ng-click="vm.clearSearchFilter()" 
                                    data-i18n-attr="{title: 'common.Clear_filter'}">
                                    <span class="fa fa-ban"></span>
                                </button>                                
                                <button type="button"
                                    class="btn btn-default"
                                    ng-click="vm.refreshTable()"
                                    data-i18n-attr="{title: 'common.Refresh_search_results'}">
                                    <span class="fa fa-refresh"></span>
                                </button>                                     
                            </div>    
                            <div class="col-md-10 searchParams">
                                <div class="row">
                                    <div class="col-md-12">                                        
                                        <div class="form-group col-md-3">
		                                    <div class="col-md-12">
		                                        <mip-tutkimus t-model="vm.kartatTable.filter().properties"></mip-tutkimus>
		                                    </div>
		                                </div> 
                                        <div class="form-group col-md-3">
                                            <div class="col-md-12">
                                                <mip-tutkimuslaji-multi lista="vm.kartatTable.filter().properties"></mip-tutkimuslaji-multi>
                                            </div>
                                        </div> 
                                        <div class="form-group col-md-3">
                                            <div class="col-md-12">
                                                <input type="text" class="form-control"
                                                    name="tutkimus_lyhenne"
                                                    ng-model="vm.kartatTable.filter().properties.tutkimus_lyhenne"
                                                    data-i18n-attr="{placeholder: 'ark.Research_abbreviation'}" spellcheck="false" autocomplete="off">
                                            </div>
                                        </div>
                                        <div class="form-group col-md-3">
                                            <div class="col-md-12">
                                                <input type="text" class="form-control"
                                                    name="tutkimus_paanumero" ng-model="vm.kartatTable.filter().properties.tutkimus_paanumero"
                                                    data-i18n-attr="{placeholder: 'ark.Main_number'}" spellcheck="false" autocomplete="off">                                          
                                            </div>
                                        </div>                                        
                                    </div>
                                </div>
	                            <div class="row">
                                    <div class="col-md-12">		                                
                                        <div class="form-group col-md-3">
                                            <div class="col-md-12">
                                                <select class="form-control" name="karttatyyppi" ng-model="vm.kartatTable.filter().properties.karttatyyppi"
                                                    ng-options="karttatyyppi.id as karttatyyppi.tyyppi for karttatyyppi in vm.karttatyypit track by karttatyyppi.id">
                                                    <option value="" i18n="ark.All_map_types"></option>
                                                </select>
                                            </div>
                                        </div>
                                        <div class="form-group col-md-3">
                                            <div class="col-md-12">
                                                <input type="number" class="form-control"
                                                    name="karttanumero" ng-model="vm.kartatTable.filter().properties.karttanumero"
                                                    data-i18n-attr="{placeholder: 'ark.Map_number'}" spellcheck="false" autocomplete="off">                                          
                                            </div>
                                        </div>
                                        <div class="form-group col-md-3">
                                            <div class="col-md-12">
                                                <input type="text" class="form-control"
                                                    name="tutkimus_klkoodi" ng-model="vm.kartatTable.filter().properties.tutkimus_klkoodi"
                                                    data-i18n-attr="{placeholder: 'ark.KL_code'}" spellcheck="false" autocomplete="off">                                          
                                            </div>
                                        </div>
                                        <div class="form-group col-md-3">
                                            <div class="col-md-12">
                                                <input type="text" class="form-control"
                                                    name="yksikkotunnus" ng-model="vm.kartatTable.filter().properties.yksikkotunnus"
                                                    data-i18n-attr="{placeholder: 'unit.Unit_identifier'}" spellcheck="false" autocomplete="off">                                          
                                            </div>
                                        </div>                                         
	                                </div>
                                </div>
                            </div>                        
                        </div>
                    </div>
                    <div class="panel-heading collapsed" role="tab" data-toggle="collapse"
                        data-target="#lisatiedotPanel">
                        <h4 class="panel-title">
                            <span i18n="common.Detailed_search"></span>
                            <span class="pull-right glyphicon clickable_space collapsed-indicator"></span>
                        </h4>
                    </div>
                    <div class="panel-body form-horizontal panel-collapse collapse"
                        id="lisatiedotPanel" style="margin-bottom: 1em;">
                        <div class="row">                            
                            <div class="col-md-12 col-sm-12 col-xs-12">   
                                <div class="form-group col-md-3">
                                    <div class="col-md-12">
                                         <input type="text" class="form-control"
                                    name="loyto_luettelointinumero" ng-model="vm.kartatTable.filter().properties.loyto_luettelointinumero"
                                    data-i18n-attr="{placeholder: 'ark.Listing_number_discovery'}" spellcheck="false" autocomplete="off">
                                    </div>
                                </div>  
                                <div class="form-group col-md-3">
                                    <div class="col-md-12">
                                         <input type="text" class="form-control"
                                    name="nayte_luettelointinumero" ng-model="vm.kartatTable.filter().properties.nayte_luettelointinumero"
                                    data-i18n-attr="{placeholder: 'ark.Listing_number_sample'}" spellcheck="false" autocomplete="off">
                                    </div>
                                </div>  
                                <div class="form-group col-md-3">
                                    <div class="col-md-12">
                                        <input type="text" class="form-control"
                                        name="piirtaja" ng-model="vm.kartatTable.filter().properties.piirtaja"
                                        data-i18n-attr="{placeholder: 'ark.Drawn_by'}" spellcheck="false" autocomplete="off">
                                    </div>
                                </div>   
                                <div class="form-group col-md-3">
                                    <div class="col-md-12">
                                        <select class="form-control" name="karttamittakaava" ng-model="vm.kartatTable.filter().properties.mittakaava"
                                            ng-options="karttamittakaava.id as karttamittakaava.mittakaava for karttamittakaava in vm.mittakaavat | orderBy: 'id' track by karttamittakaava.id">
                                            <option value="" i18n="ark.All_scales"></option>
                                        </select>
                                    </div>
                                </div>   
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-md-12 col-sm-12 col-xs-12">
                                <div class="form-group col-md-3">
                                    <div class="col-md-12">
                                        <input type="text" class="form-control"
                                            name="asiasanat"
                                            ng-model="vm.kartatTable.filter().properties.asiasanat"
                                            data-i18n-attr="{placeholder: 'ark.Glossaries'}" spellcheck="false" autocomplete="off">
                                    </div>
                                </div>   
                                <div class="form-group col-md-3">
                                    <div class="col-md-12">
                                        <input type="text" class="form-control"
                                            name="kuvaus" ng-model="vm.kartatTable.filter().properties.kuvaus"
                                            data-i18n-attr="{placeholder: 'common.Description'}" spellcheck="false" autocomplete="off">                                          
                                    </div>
                                </div>
                                <div class="form-group col-md-3">
                                    <div class="col-md-12">
                                         <input type="text" class="form-control"
                                            name="alkup_karttanumero" ng-model="vm.kartatTable.filter().properties.alkup_karttanumero"
                                            data-i18n-attr="{placeholder: 'ark.Original_map_number'}" spellcheck="false" autocomplete="off">
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <table ng-table="vm.kartatTable" class="table table-striped table-bordered"
                        template-pagination="pages/templates/table-pagination.html"
                        show-filter="false">
                        <tr ng-repeat="kartta in $data" style="cursor: pointer"
                            ng-click="vm.openKartta(kartta)">                          
                            <td data-title="vm.getColumnName('Research')"
                                filter="{ 'properties.tutkimukset': 'text' }">{{kartta.properties.tutkimukset.nimi}}</td>
                            <td data-title="vm.getColumnName('Type')"
                                filter="{ 'properties.tutkimukset': 'text' }">{{kartta.properties.tutkimukset.tutkimuslaji|namei18n}}</td>                            
                            <td data-title="vm.getColumnName('Map_number', 'ark')"
                                filter="{ 'properties.karttanumero': 'text' }">{{kartta.properties.karttatyyppi.tyyppi}} {{kartta.properties.karttatyyppi.numero}}.{{kartta.properties.karttanumero}}</td>                            
                            <td data-title="vm.getColumnName('Description')"
                                filter="{ 'properties.kuvaus': 'text' }">{{kartta.properties.kuvaus}}</td>                            	                                
                           <td data-title="vm.getColumnName('Unit_identifier', 'unit')"
                                filter="{ 'properties.yksikko': 'text' }"><span ng-repeat="yksikko in kartta.properties.yksikot">{{yksikko.yksikkotunnus}}<span ng-if="!$last">, </span></span></td>
                            <td data-title="vm.getColumnName('Discovery', 'ark')"
                                filter="{ 'properties.loyto': 'text' }"><span ng-repeat="loyto in kartta.properties.loydot">{{loyto.luettelointinumero}}<span ng-if="!$last">, </span></span></td>
                            <td data-title="vm.getColumnName('Sample', 'ark')"
                                filter="{ 'properties.nayte': 'text' }"><span ng-repeat="nayte in kartta.properties.naytteet">{{nayte.luettelointinumero}}<span ng-if="!$last">, </span></span></td>
                            <td data-title="vm.getColumnName('Drawn_by', 'ark')"
                                filter="{ 'properties.piirtaja': 'text' }">{{kartta.properties.piirtaja}}</td>
                            <td data-title="vm.getColumnName('Organization')"
                                filter="{ 'properties.organisaatio': 'text' }">{{kartta.properties.organisaatio}}</td>
                            <td data-title="vm.getColumnName('Original_map_number', 'ark')"
                                filter="{ 'properties.alkup_karttanumero': 'text' }">{{kartta.properties.alkup_karttanumero}}</td>
                        </tr>
                    </table>                   
                </div>                
            </div>
        </div>
    </div>
</div>