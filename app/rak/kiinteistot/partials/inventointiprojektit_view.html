
<!-- Inventointiprojektit - katselumoodi -->
<div class="panel panel-default panel-collapsible">
	<div class="panel-heading" data-toggle="collapse" data-target="#invProjPanel{{modalId}}">
		<h4 class="panel-title">
		    <span data-i18n="common.Inventory_projects"></span>
            <span class="pull-right glyphicon clickable_space collapsed-indicator"></span>
		</h4>
	</div>
    <div id="invProjPanel{{modalId}}" class="panel-body panel-collapse collapse in">       
        <table class="table table-striped table-bordered">
            <tr>
                <th data-i18n="common.Name"></th>
                <th data-i18n="common.Inventor"></th>
                <th data-i18n="common.Inventory_date"></th>
                <th data-i18n="common.Field_date"></th>
                <th data-i18n="common.Delete" ng-show="edit && (userRole == 'pääkäyttäjä' || userRole == 'tutkija')"></th>
            </tr>
            <tr ng-repeat-start="inventointiprojekti in kiinteisto.properties.inventointiprojektit">                
                <td rowspan="{{inventointiprojekti.inventoijat.length>0?inventointiprojekti.inventoijat.length:1}}"           
                    data-ng-click="!edit && selectInventointiprojekti(inventointiprojekti)" style="cursor: pointer">{{inventointiprojekti.nimi}}</td>
                <td>{{inventointiprojekti.inventoijat[0].etunimi}} {{inventointiprojekti.inventoijat[0].sukunimi}}</td>
                <td>{{inventointiprojekti.inventoijat[0].inventointipaiva | pvm:'dd.MM.yyyy'}}</td>
                <td>{{inventointiprojekti.inventoijat[0].kenttapaiva | pvm:'dd.MM.yyyy'}}</td>
            	<td ng-show="edit && (userRole == 'pääkäyttäjä' || userRole == 'tutkija')"><button type="button" data-ng-click="addToInventointiprojektiDeleteList(inventointiprojekti.id, inventointiprojekti.inventoijat[0].inventoija_id)" class="btn btn-danger">-</button></td>
            </tr>
            <tr ng-repeat-end 
                ng-repeat="inventoija in inventointiprojekti.inventoijat"
                ng-if="!$first">
                <td>{{inventoija.etunimi}} {{inventoija.sukunimi}}</td>
                <td>{{inventoija.inventointipaiva | pvm:'dd.MM.yyyy'}}</td>
                <td>{{inventoija.kenttapaiva | pvm:'dd.MM.yyyy'}}</td>                                 
            	<td ng-show="edit && (userRole == 'pääkäyttäjä' || userRole == 'tutkija')"><button type="button" data-ng-click="addToInventointiprojektiDeleteList(inventointiprojekti.id, inventoija.inventoija_id)" class="btn btn-danger">-</button></td>  
            </tr>
        </table>
	</div>    
</div>

