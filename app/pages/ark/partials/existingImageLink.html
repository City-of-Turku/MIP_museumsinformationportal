<div class="modal" tabindex="-1" role="dialog">
	<div class="modal-dialog mip-modal">
		<div class="modal-content">
			<div class="modal-header">
				<button type="button" class="close" ng-click="close()">&times;</button>
				<button type="button" class="close" ng-click="resize()">{{resizeIcon}}</button>
				<h4 class="modal-title">
					<span i18n="common.Image" ng-show="mode == 'image'"></span>
					<span i18n="common.File" ng-show="mode == 'file'"></span>
					(objektille {{related_id}})
				</h4>
			</div>
			<div class="modal-body">
				<div class="panel">
					<div class="panel-body">
						<div class="row">
							<div class="panel-group col-md-12"
								ng-model="multiplePanels.activePanels" role="tablist"
								bs-collapse data-allow-multiple="true"
								aria-multiselectable="true">
								<div class="panel panel-default">
									<div class="panel-heading" role="tab">
										<h4 class="panel-title">
											<a bs-collapse-toggle>
												<span i18n="common.Actions"></span>
											</a>
										</h4>
									</div>
									<div class="panel-collapse" role="tabpanel" bs-collapse-target>
										<div class="panel-body form-horizontal">
											<div class="col-md-12">
												<div class="form-group col-md-3">
													<label for="aihe" class="col-md-12">
														<span i18n="common.Subject"></span>
													</label>
													<div class="col-md-12">
														<input type="text" class="form-control" name="aihe"
															ng-model="imagesTable.filter().properties.aihe"
															placeholder="">
													</div>
												</div>
												<div class="form-group col-md-3">
													<label for="kuvaaja" class="col-md-12">
														<span i18n="common.Taken_by"></span>
													</label>
													<div class="col-md-12">
														<input type="text" class="form-control" name="kuvaaja"
															ng-model="imagesTable.filter().properties.kuvaaja">
													</div>
												</div>
												<div class="form-group col-md-3">
													<label for="kuvaaja" class="col-md-12">
														<span i18n="common.Shoot_date"></span>
													</label>
													<div class="col-md-12">
														<input bs-datepicker data-date-format="yyyy-MM-dd"
															model-date-format="yyyy-MM-dd" data-autoclose="1"
															data-date-type="string"
															class="form-control" name="kuvauspvm"
															ng-model="imagesTable.filter().properties.kuvauspvm">
													</div>
												</div>
												<div class="form-group col-md-3">
													<label for="metatiedot" class="col-md-12">
														<span i18n="common.Metadata"></span>
													</label>
													<div class="col-md-12">
														<input type="text" class="form-control" name="metatiedot"
															ng-model="imagesTable.filter().properties.metatiedot">
													</div>
												</div>
												<div class="form-group col-md-3">
													<label for="alkup_tiedostonimi" class="col-md-12">
														<span i18n="common.Original_filename"></span>
													</label>
													<div class="col-md-12">
														<input type="text" class="form-control" name="alkup_tiedostonimi"
															ng-model="imagesTable.filter().properties.alkup_tiedostonimi">
													</div>
												</div>
											</div>
										</div>
									</div>
								</div>
							</div>
						</div>
					</div>
					<div class="row">
						<div class="col-md-12" id="left">
							<table ng-table="imagesTable"
								class="table table-striped table-bordered" show-filter="false">
								<tr ng-repeat="image in $data" style="cursor: pointer"
									ng-click="selectImage(image)">
									<td data-title="getColumnName('Subject')"
										sortable="'properties.aihe'"
										filter="{ 'properties.aihe': 'text' }">{{image.properties.aihe}}</td>
									<td data-title="getColumnName('Taken_by')"
										sortable="'properties.kuvaaja'"
										filter="{ 'properties.kuvaaja': 'text' }">{{image.properties.kuvaaja}}</td>
									<td data-title="getColumnName('Shoot_date')"
										sortable="'properties.kuvauspvm'"
										filter="{ 'properties.kuvauspvm': 'text' }">{{image.properties.kuvauspvm}}</td>
									<td data-title="getColumnName('Thumbnail')">
										<img src="{{image.properties.url_small}}"
											alt="{{image.properties.aihe}}" style="height: 50%;">
									</td>
									<td data-title="getColumnName('Select')"><input type="checkbox" ng-model="tmpImage" ng-change="linkImage(image)" /></td>
								</tr>
							</table>
						</div>
					</div>
					<!--<pre>{{imagesToLink}}</pre>-->
				</div>
			</div>
			<div class="modal-footer">
				<button type="button" class="btn btn-default" ng-click="close()"
					ng-show="!edit" span i18n="common.Close"></button>
				<button type="button" class="btn btn-primary"
					ng-click="save()" ng-show="mode=='image'"
					i18n="common.Link_selected"></button>
			</div>
		</div>
	</div>
</div>